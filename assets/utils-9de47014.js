function e(e,t=!1){if(!e)return"";let r=e.replace(/oe/g,"ö").replace(/o\//g,"ö").replace(/o:/g,"ö").replace(/ae/g,"ä").replace(/a\//g,"ä").replace(/a:/g,"ä").replace(/ue/g,"ü").replace(/u\//g,"ü").replace(/u:/g,"ü").replace(/s\//g,"ß");return"schoener"===r.toLowerCase()&&(r="schöner"),"schoen"===r.toLowerCase()&&(r="schön"),"felle"===r.toLowerCase()&&(r="fälle"),t||(r=r.toLowerCase()),r}function t(t,r=!1){if(!t)return"";let o=e(t,r);return o=o.replace(/[^\p{L}\p{N}\s]/gu,"").replace(/\s+/g," ").trim(),o}function r(e){return e?e.replace(/[^\p{L}\p{N}\s]/gu,""):""}function o(e){return/[^\p{L}\p{N}\s]/gu.test(e)}function n(e,t){if(!e)return t?t.length:0;if(!t)return e.length;const r=e.length,o=t.length,n=Array(r+1).fill().map((()=>Array(o+1).fill(0)));for(let s=0;s<=r;s++)n[s][0]=s;for(let s=0;s<=o;s++)n[0][s]=s;for(let s=1;s<=r;s++)for(let r=1;r<=o;r++){const o=e[s-1]===t[r-1]?0:1;n[s][r]=Math.min(n[s-1][r]+1,n[s][r-1]+1,n[s-1][r-1]+o)}return n[r][o]}function s(e,t,r=!1){return!(!e||!t)&&(r?e===t:e.toLowerCase()===t.toLowerCase())}function l(t,r){if(!t||!r)return!1;if(t===r)return!0;const o=e(t.toLowerCase()),s=e(r.toLowerCase());if(o===s)return!0;if(t.toLowerCase()===r.toLowerCase())return!0;if(t.toLowerCase()===r.toLowerCase())return!0;if("berlin"===t.toLowerCase()&&"berlim"===r.toLowerCase()||"berlim"===t.toLowerCase()&&"berlin"===r.toLowerCase())return!0;const l=n(o,s),a=Math.max(o.length,s.length);let i;return i=a<=3?.7:a<=5?.6:a<=8?.55:.5,1-l/a>=i}function a(e,t){if(!e||!t)return!1;if(e.toLowerCase()===t.toLowerCase())return!0;const r=e.toLowerCase(),o=t.toLowerCase(),n=["fährt","fahrt","büro","buro","in","ihr","ist","es","der","die","das"];if(n.includes(r)||n.includes(o))return r===o;if(o.includes(r)&&e.length>=3&&e.length/t.length>=.3)return!0;if(o.endsWith(r)&&e.length>=4)return!0;if(o.startsWith(r)&&e.length>=3)return!0;if(r.length>=6&&o.length>=6){const e=r.substring(3);if(e===o.substring(3)&&e.length>=4)return!0}return!1}function i(e,t,r=!1){const o=e.length,n=t.length,s=Array(o+1).fill().map((()=>Array(n+1).fill()));s[0][0]={cost:0,ops:[]};for(let f=1;f<=o;f++)s[f][0]={cost:f,ops:[...s[f-1][0].ops,"del"]};for(let f=1;f<=n;f++)s[0][f]={cost:f,ops:[...s[0][f-1].ops,"ins"]};for(let f=1;f<=o;f++)for(let o=1;o<=n;o++){const n=(l=e[f-1],a=t[o-1],r?l===a:l.toLowerCase()===a.toLowerCase()),i=s[f-1][o-1].cost+(n?0:1),c=s[f][o-1].cost+1,u=s[f-1][o].cost+1;s[f][o]=n&&i<=c&&i<=u?{cost:i,ops:[...s[f-1][o-1].ops,"match"]}:!n&&i<=c&&i<=u?{cost:i,ops:[...s[f-1][o-1].ops,"sub"]}:c<=u?{cost:c,ops:[...s[f][o-1].ops,"ins"]}:{cost:u,ops:[...s[f-1][o].ops,"del"]}}var l,a;let i=o,c=n;const u=[];for(;i>0||c>0;){const r=s[i][c].ops[u.length+(s[i][c].ops.length-(o+n))];i>0&&c>0&&("match"===r||"sub"===r)?(u.unshift({ref:e[i-1],user:t[c-1],op:r}),i--,c--):c>0&&"ins"===r?(u.unshift({ref:null,user:t[c-1],op:"ins"}),c--):i>0&&"del"===r?(u.unshift({ref:e[i-1],user:null,op:"del"}),i--):i>0&&c>0?(u.unshift({ref:e[i-1],user:t[c-1],op:"sub"}),i--,c--):c>0?(u.unshift({ref:null,user:t[c-1],op:"ins"}),c--):i>0&&(u.unshift({ref:e[i-1],user:null,op:"del"}),i--)}return u}function c(e,...t){}const u="/audio/chap01.mp3",f="/audio/chap01.vtt";function p(){const e=localStorage.getItem("dictation_audioUrl"),t=localStorage.getItem("dictation_vttUrl"),r=localStorage.getItem("dictation_courseId"),o=localStorage.getItem("dictation_lessonId");return{isEmbedded:!(!e||!t),audioUrl:e||u,vttUrl:t||f,courseId:r,lessonId:o}}async function h(e){try{const t=await fetch(e);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const r=await t.text(),o=function(e){const t=e.split("\n"),r=[];let o=0,n=0;for(;n<t.length&&!t[n].includes("--\x3e");)n++;for(;n<t.length;){if(t[n].includes("--\x3e")){const e=t[n].match(/(\d{2}:\d{2}:\d{2}.\d{3}) --> (\d{2}:\d{2}:\d{2}.\d{3})/);if(e&&e.length>=3){const s=d(e[1]),l=d(e[2]);n++;let a="";for(;n<t.length&&""!==t[n].trim();)a+=t[n]+" ",n++;a=a.trim(),a&&r.push({id:o++,text:a,startTime:s,endTime:l})}}n++}return r}(r);return{title:g(r)||"Dictation Exercise",audio:p().audioUrl,sentences:o}}catch(t){throw console.error("Failed to load dictation from VTT:",t),t}}function g(e){const t=e.match(/NOTE[\s\n]+Title:([^\n]+)/i);return t&&t[1]?t[1].trim():null}function d(e){const t=e.split(":");return 3600*parseInt(t[0],10)+60*parseInt(t[1],10)+parseFloat(t[2])}export{s as a,i as b,t as c,c as d,l as e,o as f,p as g,h,a as i,n as l,e as n,r};
//# sourceMappingURL=utils-9de47014.js.map
