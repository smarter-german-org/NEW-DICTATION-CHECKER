# Fixing the Teachable Embed Code Generator Issue

This document explains how to fix the issue where the dictation checker doesn't appear in Teachable courses after embedding.

## The Issue

The embed code generated by the tool was missing the Integration Script URL, resulting in:
```html
<script src="?raw=1"></script>
```

Instead of a proper script tag with the correct URL to the integration JavaScript file.

## How to Fix It

1. Make sure you're using the updated `teachable-embed-generator-clean.html` file which has improved error handling.

2. **Important**: You MUST provide a valid URL to the `teachable-integration.js` file in the **Teachable Integration Script URL** field.

3. The correct URL should be the Dropbox link to your `teachable-integration.js` file, which should look something like:
   ```
   https://www.dropbox.com/scl/fi/your-folder-id/teachable-integration.js
   ```

4. The generator will automatically format this URL to a direct download URL:
   ```
   https://dl.dropboxusercontent.com/scl/fi/your-folder-id/teachable-integration.js?raw=1
   ```

5. Check the browser console (right-click → Inspect → Console) to see debug logs that verify the URL is being formatted correctly.

## Step-by-Step Testing Process

1. Open the generator at http://localhost:8080/teachable-embed-generator-clean.html

2. Fill in all fields:
   - Course Level (e.g., A1)
   - Lesson Number (e.g., L01)
   - **Teachable Integration Script URL** (this is crucial)
   - Audio File URL
   - VTT File URL

3. Click "Generate Code"

4. Copy the generated code and verify that it includes a properly formatted script tag:
   ```html
   <script src="https://dl.dropboxusercontent.com/scl/fi/your-folder-id/teachable-integration.js?raw=1"></script>
   ```
   
5. Paste this code into your Teachable lesson in HTML mode

## Hosting Your Integration Script

1. Make sure your `teachable-integration.js` file is publicly accessible in your Dropbox account.

2. The file should be in the `/public` folder of your project.

3. Get the Dropbox sharing link for this file and use it in the generator.

4. For more details, see the DROPBOX-HOSTING-GUIDE.md in the docs folder.

## Troubleshooting

If the dictation checker still doesn't appear:

1. Check browser console for JavaScript errors
2. Verify that all URLs are publicly accessible
3. Ensure the integration script is being loaded correctly
4. Check if CORS issues are preventing resource loading
